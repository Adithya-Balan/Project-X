<!-- templates/account/email.html -->
{% extends "myapp/base.html" %}
{% load allauth account %}

{% block title %}Manage Email{% endblock %}

{% block content %}
<div class="max-w-md mx-auto bg-white shadow-lg rounded-lg p-6">
    <h2 class="text-2xl font-bold text-black mb-4">Manage Email</h2>
    <p class="text-gray-600 mb-6">You can add, remove, or verify your email addresses here.</p>

    <!-- List of emails -->
    <ul class="space-y-4">
        {% for email_address in email_list %}
        <li class="flex justify-between items-center border-b pb-3">
            <div>
                <p class="text-black font-medium">{{ email_address.email }}</p>
                {% if email_address.primary %}<span class="text-green-600 text-sm">Primary</span>{% endif %}
                {% if email_address.verified %}<span class="text-green-600 text-sm">Verified</span>{% else %}<span class="text-red-600 text-sm">Unverified</span>{% endif %}
            </div>
            <div class="flex gap-2">
                {% if not email_address.primary %}
                <form method="post" action="{% url 'account_email' %}" class="inline">
                    {% csrf_token %}
                    <input type="hidden" name="email" value="{{ email_address.email }}">
                    <input type="hidden" name="action" value="primary">
                    <button type="submit" class="text-green-600 hover:underline">Make Primary</button>
                </form>
                {% endif %}
                <form method="post" action="{% url 'account_email' %}" class="inline">
                    {% csrf_token %}
                    <input type="hidden" name="email" value="{{ email_address.email }}">
                    <input type="hidden" name="action" value="remove">
                    <button type="submit" class="text-red-600 hover:underline">Remove</button>
                </form>
            </div>
        </li>
        {% endfor %}
    </ul>

    <!-- Add new email -->
    <div class="mt-6">
        <h3 class="text-lg font-semibold text-black mb-2">Add Email Address</h3>
        <form method="post" action="{% url 'account_email' %}" class="space-y-4">
            {% csrf_token %}
            <input type="email" name="email" placeholder="New email address" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500">
            <button type="submit" name="action" value="add" class="w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-all duration-200">Add Email</button>
        </form>
    </div>
</div>
{% endblock %}