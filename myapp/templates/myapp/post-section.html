{% load static %}

{% if section == 'posts' %}
<div class="mx-auto" id="savedPostSection">
    <div class="flex flex-col gap-y-6 gap-x-6 flex-wrap">

        
        {% if user_post %}    
        {% for post in user_post %}        
        <!-- Single Post -->
        <div class="bg-white shadow-md rounded-lg w-full max-w-[34rem] p-4">
            <!-- User Info -->
            <div class="flex items-center space-x-3">
                <a href='{% url "user_profile" userinfo_obj.user.username  %}'>
                <img src="{{post.user.profile_image.url}}" alt="User" class="w-10 h-10 rounded-lg object-cover"></a>
                <div>
                    <a href='{% url "user_profile" userinfo_obj.user.username %}' class="font-semibold">{{post.user.user.first_name}} {{post.user.user.last_name}}</a>
                    <p class="text-xs text-gray-500">{{post.created_at}}</p>
                </div>
            </div>

            <!-- Post Content -->
            <p class="mt-3 text-[#686868]">
                {{post.content}}
            </p>

            <!-- Post Image -->
            <div class="mt-3 w-full aspect-square overflow-hidden">
                <img src="{{post.file.url}}" alt="Post" class="w-full h-full object-cover">  
            </div>

            <!-- Actions -->
            <div class="flex justify-between mt-3 text-gray-600 text-sm">
                <div class="flex gap-x-3">

                    <div class="flex items-center space-x-2 cursor-pointer like-container" data-post-id="{{ post.id }}">
                        <i class="text-xl fa-solid fa-heart {% if user.info in post.likes.all %}text-[#6feb85]{% endif %}"></i> 
                        <span class="like-count">{{ post.total_likes }}</span>
                    </div>

                    <div class="commentBtn flex items-center space-x-2 cursor-pointer hover:text-[#6feb85]">
                        <i class="text-xl fa-solid fa-comment"></i> <span id='postCommentCount'>{{post.tot_comments}}</span>
                    </div>
                </div>
                <div class="bookmarkBtn cursor-pointer">
                    <i class="text-xl fa-solid fa-bookmark"></i>
                </div>
            </div>

            <!-- Comments Section -->
            <div class="mt-3 hidden commentsSection">

                <!-- Add a Comment -->
                <form method='post' id = 'postCommentForm' class="flex items-center space-x-2 mt-3">
                    <!-- <img src="profile.webp" alt="User" class="w-10 h-10 rounded-full object-cover"> -->
                    <input type="hidden" id="postId" name="post_id" value="{{ post.id }}">
                    <input type="text" id="postCommentText" name="comment" placeholder="Write a comment..."
                        class="flex-1 border p-2 rounded-lg outline-none">
                    <button type='submit'
                        class="bg-black text-white px-3 py-2 rounded-md transition hover:scale-105">Post</button>
                </form>

                <!-- all Comments -->
                <div class="flex flex-col gap-y-4 mt-6"  id ='postCommentContainer'>
                    {% for comment in post.comments.all %}
                    <!-- single comment -->
                    <div class="flex items-start space-x-2">
                        <a href='{% url "user_profile" comment.user.user.username %}'><img src="{{comment.user.profile_image.url}}" alt="User" class="w-8 h-8 rounded-sm object-cover"></a>
                        <div class="bg-gray-50 p-2 rounded-lg w-full">
                            <a href='{% url "user_profile" comment.user.user.username %}' class="text-sm font-semibold -mt-2">{{comment.user.user.username}}</a>
                            <p class="text-sm mt-2">{{comment.content}}</p>
                        </div>
                    </div>
                    <!-- end of single comment -->
                    {% endfor %}
                </div>
            </div>
        </div>
        {% endfor %}
        {% endif %}


        <!-- Another Post -->
        <div class="bg-white shadow-md rounded-lg w-full max-w-[34rem] p-4">
            <div class="flex items-center space-x-3">
                <img src="profile.webp" alt="User" class="w-10 h-10 rounded-full object-cover">
                <div>
                    <a class="font-semibold">Emily Smith</a>
                    <p class="text-xs text-gray-500">5 hours ago</p>
                </div>
            </div>
            <p class="mt-3 text-[#686868]">
                Lorem ipsum dolor sit amet consectetur adipisicing elit. Blanditiis atque facere ratione
                quam fugit minima totam placeat magni aspernatur, in quidem voluptatem. Debitis, iure
                tenetur. Adipisci, quaerat. Minima, quia est. Lorem ipsum dolor sit amet consectetur,
                adipisicing elit. Sint, quasi provident? Earum necessitatibus rerum nisi distinctio sed
                molestias facilis esse modi aspernatur adipisci at, consequuntur officiis expedita aliquam
                rem eius.
            </p>
            <div class="mt-3 w-full aspect-video overflow-hidden bg-[#f8fafd]">
                <img src="singleProject.png" alt="Post" class="w-full h-full object-cover">
            </div>
            <div class="flex justify-between mt-3 text-gray-600 text-sm">
                <div class="flex gap-x-3">
                    <div class="flex items-center space-x-2 cursor-pointer hover:text-[#6feb85]">
                        <i class="text-xl fa-solid fa-heart"></i> <span>12 </span>
                    </div>
                    <div class="commentBtn flex items-center space-x-2 cursor-pointer hover:text-[#6feb85]">
                        <i class="text-xl fa-solid fa-comment"></i> <span>4 </span>
                    </div>
                </div>
                <div class="bookmarkBtn cursor-pointer">
                    <i class="text-xl fa-solid fa-bookmark"></i>
                </div>
            </div>
            <!-- Comments Section -->
            <div class="mt-3 border-t pt-3 hidden commentsSection">
                <!-- all Comments -->
                <div class="flex flex-col gap-y-4">
                    <!-- single comment -->
                    <div class="flex items-start space-x-2">
                        <img src="profile.webp" alt="User" class="w-10 h-10 rounded-full object-cover">
                        <div class="bg-gray-100 p-2 rounded-lg w-full">
                            <p class="text-sm font-semibold">user 1</p>
                            <p class="text-sm">ncew hi odnwq odnwo ikn dwqohdw</p>
                        </div>
                    </div>
                    <!-- end of single comment -->
                </div>

                <!-- Add a Comment -->
                <div class="flex items-center space-x-2 mt-3">
                    <!-- <img src="profile.webp" alt="User" class="w-10 h-10 rounded-full object-cover"> -->
                    <input type="text" placeholder="Write a comment..."
                        class="flex-1 border p-2 rounded-lg outline-none">
                    <button
                        class="bg-black text-white px-3 py-1 rounded-md transition hover:scale-105">Post</button>
                </div>
            </div>
        </div>

    </div>

</div>
{% endif %}
