{% extends "myapp/base.html" %} 
{% load static %}
{% load custom_filter %}

{% block title %}{{user.username}}{% endblock %} 

{% block style %}<link rel="stylesheet" href="{% static 'styles/user_profile_page.css' %}"/>{% endblock %} 
{% block script %}
<script src="https://cdn.tailwindcss.com"></script>
{% endblock %} 

{% block content %}
<body class="text-[15px] h-full bg-[#f6f6f6] overflow-x-hidden">
    <!-- navbar -->
    {% include "myapp/navbar.html" %}
    <!-- main section -->

    <div class="w-full lg:flex-row lg:flex lg:gap-x-5 md:flex flex flex-col md:justify-start md:items-start">
        <!-- sidenav -->
        {% include "myapp/sidenav.html" %}

        <!-- list section -->
        <div class="relative flex mt-32 lg:mt-32 md:w-full px-2 flex-[5] pb-16">
            <a href = '{% url "user_profile" userinfo_obj.user.username %}' class="transition border-black hover:bg-white border hover:border-black hover:text-black absolute -top-12  right-3  mt-1 bg-black text-white flex items-center gap-x-2 px-3 py-1 rounded">
                <i class="fa-solid fa-arrow-left"></i> <span class="hidden md:block">Back</span></a>
                    
            <div class="flex flex-col items- gap-y-10 w-full">
                <div class="flex justify-start gap-x-2 md:gap-x-10 items-end bg-[#00000036] px-3 py-2 rounded-md">

                    <a href = '?list=followers' data-active = "{% if request.GET.list == 'followers' or request.GET.list == None %}true{% else %}false{% endif %}" class="fl-btn">Followers</a>

                    <a href = '?list=following' data-active = "{% if request.GET.list == 'following' %}true{% else %}false{% endif %}" class="fl-btn">Following</a>
                    
                    <button class="fl-btn text-[#686868] font-bold px-2 py-1 rounded-md hover:bg-white hover:text-black transition">Groups</button>
                </div>


                <div class="flex flex-col gap-y-3">

                    
                    {% for people in user_list %}
                    <div class="bg-white px-3 py-2 rounded-md flex g items-center w-full flex-wrap gap-y-2 justify-between max-[470px]:flex-col max-[470px]:items-start">
                        <div class="flex gap-x-5 ">
                            <div class="">
                                <div><a href="{% url 'user_profile' people.user.username %}"><img src="{{people.profile_image.url}}" class="rounded-lg w-14 h-14" alt=""></a></div>
                            </div>
                            <div class="flex flex-col gap-y-1 ">
                                <a href="{% url 'user_profile' people.user.username %}" class="font-bold cursor-pointer hover:underline transition">{{people.user.first_name}} {{people.user.last_name}}</a>
                                <p>@{{people.user.username}}</p>
                                <p class="break-words">#mood...</p>
                            </div>
                        </div>
                        <div class="self-center">
                            {% if user.info == people %}
                            <a href='{% url "user_profile" user.username %}' class="bg-[#6feb8627] px-2 py-1 rounded-md text-[#6feb85] font-bold border border-[#6feb85] transition hover:bg-[#6feb85] hover:text-black">View Profile</a>
                            {% elif user.info|is_following:people %}
                            <a href='{% url "unfollow_user" people.id %}' class="bg-[#6feb8627] px-2 py-1 rounded-md text-[#6feb85] font-bold border border-[#6feb85] transition hover:bg-[#6feb85] hover:text-black">Following</a>
                            {% else %}
                            <a href='{% url "follow_user" people.id %}' class="bg-[#6feb8627] px-2 py-1 rounded-md text-[#6feb85] font-bold border border-[#6feb85] transition hover:bg-[#6feb85] hover:text-black">Follow</a>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}

                </div>

                    {% comment %} pagination {% endcomment %}
                {% if user_list %}
                <div class="flex justify-center mt-6">
                    <div class="flex items-center space-x-4">
                        {% if user_list.has_previous %}
                        <a href="?list={{request.GET.list}}&page=1" class="px-4 py-2 border border-black text-black hover:bg-black hover:text-white transition duration-200">&laquo; First</a>
                        <a href="?list={{request.GET.list}}&page={{user_list.previous_page_number}}" class="px-4 py-2 border border-black text-black hover:bg-black hover:text-white transition duration-200">Previous</a>
                        {% endif %}

                        <span class="text-black">
                            <span class="font-semibold">Page {{ user_list.number }}</span> of {{ user_list.paginator.num_pages }}
                        </span>

                        {% if user_list.has_next %}
                        <a href="?list={{request.GET.list}}&page={{user_list.next_page_number}}" class="px-4 py-2 border border-black text-black hover:bg-black hover:text-white transition duration-200">Next</a>                            
                        <a href="?list={{request.GET.list}}&page={{user_list.paginator.num_pages}}" class="px-4 py-2 border border-black text-black hover:bg-black hover:text-white transition duration-200">&laquo; Last</a>
                        {% endif %}
                    </div>
                </div>
                {% else %}
                <div class="flex flex-col items-center justify-center p-4">
                    <span class="text-lg md:text-xl lg:text-2xl font-normal text-gray-700 mb-4">
                        This user has no connections yet.
                    </span>
                    <img src="{% static 'assets/no-follower.svg' %}" alt="Not Found" class="w-24 md:w-32 lg:w-48 xl:w-64">
                </div>
                {% endif %}


            </div>
        </div>

        <!-- skill project section -->
        <div
            class=" hidden lg:flex flex-col px-4 mt-10 lg:w-1/4 lg:flex-col lg:mt-28 gap-y-5 md:flex-row md:w-full md:gap-x-5 md:mr-3 rounded-md">

            <div class="flex flex-col px-2 py-4 pb-20 bg-white md:pb-4 gap-y-5 md:w-1/2 lg:w-full rounded-md">
                <h1 class="text-xl font-bold text-center">Projects;</h1>
                <div class="flex flex-col gap-y-2 border border-[#6868682f] p-2 rounded-md">
                    <div class="flex items-start w-full gap-x-3">
                        <div class="w-20 h-20 lg:w-1/5">
                            <img src="projects.jpeg" class="rounded-md" alt="">
                        </div>
                        <div class="flex flex-col w-4/5 gap-y-2">
                            <div class="font-semibold">Project Name</div>
                            <div class="text-justify">est tempore temporibdolorum a aut quas labore...</div>
                        </div>
                    </div>
                    <hr>
                    <div class="flex flex-wrap items-center gap-x-5 gap-y-2">
                        <div class="bg-[#edaa191e] px-2 py-1 border border-[#edab19] text-[#edab19] rounded-md">Progress
                        </div>
                        <div
                            class="cursor-pointer bg-[#00000031] px-2 py-1 border border-[#000000] text-[#000000] rounded-md">
                            View</div>
                    </div>
                </div>


                <div class="flex flex-col gap-y-2 border border-[#6868682f] p-2 rounded-md">
                    <div class="flex items-start w-full gap-x-3">
                        <div class="w-20 h-20 lg:w-1/5">
                            <img src="projects.jpeg" class="rounded-md" alt="">
                        </div>
                        <div class="flex flex-col w-4/5 gap-y-2">
                            <div class="font-semibold">Project Name</div>
                            <div class="text-justify">est tempore temporibdolorum a aut quas labore...</div>
                        </div>
                    </div>
                    <hr>
                    <div class="flex flex-wrap items-center gap-x-5 gap-y-2">
                        <div class="bg-[#edaa191e] px-2 py-1 border border-[#edab19] text-[#edab19] rounded-md">Progress
                        </div>

                        <div
                            class="cursor-pointer bg-[#00000031] px-2 py-1 border border-[#000000] text-[#000000] rounded-md">
                            View
                        </div>
                    </div>
                </div>

                <div class="flex flex-col gap-y-2 border border-[#6868682f] p-2 rounded-md">
                    <div class="flex items-start w-full gap-x-3">
                        <div class="w-20 h-20 lg:w-1/5">
                            <img src="projects.jpeg" class="rounded-md" alt="">
                        </div>
                        <div class="flex flex-col w-4/5 gap-y-2">
                            <div class="font-semibold">Project Name</div>
                            <div class="text-justify">est tempore temporibdolorum a aut quas labore...</div>
                        </div>
                    </div>
                    <hr>
                    <div class="flex flex-wrap items-center gap-x-5 gap-y-2">
                        <div class="bg-[#edaa191e] px-2 py-1 border border-[#edab19] text-[#edab19] rounded-md">Progress
                        </div>

                        <div
                            class="cursor-pointer bg-[#00000031] px-2 py-1 border border-[#000000] text-[#000000] rounded-md">
                            View
                        </div>
                    </div>
                </div>

                <div class="flex flex-col gap-y-2 border border-[#6868682f] p-2 rounded-md">
                    <div class="flex items-start w-full gap-x-3">
                        <div class="w-20 h-20 lg:w-1/5">
                            <img src="projects.jpeg" class="rounded-md" alt="">
                        </div>
                        <div class="flex flex-col w-4/5 gap-y-2">
                            <div class="font-semibold">Project Name</div>
                            <div class="text-justify">est tempore temporibdolorum a aut quas labore...</div>
                        </div>
                    </div>
                    <hr>
                    <div class="flex flex-wrap items-center gap-x-5 gap-y-2">
                        <div class="bg-[#edaa191e] px-2 py-1 border border-[#edab19] text-[#edab19] rounded-md">Progress
                        </div>

                        <div
                            class="cursor-pointer bg-[#00000031] px-2 py-1 border border-[#000000] text-[#000000] rounded-md">
                            View
                        </div>
                    </div>
                </div>


                <div class="flex flex-col gap-y-2 border border-[#6868682f] p-2 rounded-md">
                    <div class="flex items-start w-full gap-x-3">
                        <div class="w-20 h-20 lg:w-1/5">
                            <img src="profile.webp" class="rounded-md" alt="">
                        </div>
                        <div class="flex flex-col w-4/5 gap-y-2">
                            <div class="font-semibold">Project Name</div>
                            <div class="text-justify">est tempore temporibdolorum a aut quas labore...</div>
                        </div>
                    </div>
                    <hr>
                    <div class="flex flex-wrap items-center gap-x-5 gap-y-2">
                        <div class="bg-[#edaa191e] px-2 py-1 border border-[#edab19] text-[#edab19] rounded-md">Progress
                        </div>

                        <div
                            class="cursor-pointer bg-[#00000031] px-2 py-1 border border-[#000000] text-[#000000] rounded-md">
                            View
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>

{% endblock  %}